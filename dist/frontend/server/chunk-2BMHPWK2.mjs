import './polyfills.server.mjs';
import{a as U}from"./chunk-PHESAHZG.mjs";import{b as T,c as N,d as B,i as j,l as z}from"./chunk-ZORVTJFM.mjs";import{q as V,t as D,u as A,w as c,x as u,z as F}from"./chunk-FUK64ECH.mjs";import{Ab as k,Bc as R,Cb as L,Db as w,Eb as O,Ga as C,Gc as I,Ia as o,Ib as E,Jb as p,Ma as d,Ra as M,Va as y,Z as v,fb as a,gb as i,hb as n,ib as m,mb as f,vb as S,xc as P,yb as l,zb as _}from"./chunk-6UL7I5E6.mjs";import{h as x}from"./chunk-S6KH3LOX.mjs";var q=r=>({"background-image":r,"background-size":"cover","background-position":"center","background-repeat":"no-repeat",width:"100vw",height:"100vh","background-color":"#666666"}),Y=r=>({"background-color":r}),W=()=>["/email-recovery"];function X(r,e){r&1&&(i(0,"div",17),v(),i(1,"svg",18),m(2,"circle",19)(3,"path",20),n()())}var h=class r{constructor(e,s,t){this.authService=e;this.router=s;this.route=t}buttonBackgroundColor=u.PRIMARY;color=u.PRIMARY;paramValue=null;urlImageBackground="";urlLogoCompany="";currentColor="";user="";errorMessage="";title="";isModalVisible=!1;isSuccess=!0;isEmailValid=!0;isEmailTouched=!1;isLoading=!1;clientData={};ngOnInit(){this.authService.loginStar(),this.getClient(),this.clientData?.ColorOne&&document.documentElement.style.setProperty("--primary-color",this.clientData.ColorOne)}colorDefaul(){let e=this.authService.getClient();e?(this.clientData=JSON.parse(e),this.urlImageBackground=this.clientData?.urlImagen??c.URL_FRONT.concat("/icon/login/fondo.png"),this.urlLogoCompany=this.clientData?.urlLogo??c.URL_FRONT.concat("/icon/login/suitextech.png"),this.currentColor=this.clientData?.ColorOne??u.PRIMARY):this.router.navigate(["/login"])}getClient(){return x(this,null,function*(){this.route.params.subscribe(e=>{e.code&&(this.paramValue=e.code)}),this.paramValue?this.authService.getClientData(this.paramValue).subscribe({next:e=>{e.success&&this.colorDefaul()}}):(this.urlImageBackground=c.URL_FRONT.concat("/icon/login/fondo.png"),this.urlLogoCompany=c.URL_FRONT.concat("/icon/login/suitextech.png"),this.currentColor=u.PRIMARY)})}esEmailValido(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}login(){if(this.isLoading=!0,!this.user){this.isLoading=!1,this.isEmailTouched=!0,this.title="Campo Vac\xEDo",this.errorMessage="No deje espacios en blanco.",this.isModalVisible=!0,this.isSuccess=!1;return}if(!this.esEmailValido(this.user)){this.isLoading=!1,this.isEmailTouched=!0,this.title="Correo Electronico",this.errorMessage="Ingrese un correo electronico valido.",this.isModalVisible=!0,this.isSuccess=!1;return}this.authService.login(this.user).subscribe({next:e=>{e.success?(this.isLoading=!1,this.authService.addEmail(this.user),this.router.navigate(["/logintwo"])):(this.isLoading=!1,this.errorMessage=e.error.Message||"Error desconocido",this.isModalVisible=!0,this.isSuccess=!0)},error:e=>{this.title=e?.error?.error?.title||"Error",this.errorMessage=e?.error?.error?.message||"Error en la solicitud al servidor",this.isModalVisible=!0,this.isSuccess=!1,this.isLoading=!1}})}closeModal(){this.isModalVisible=!1,this.isLoading=!1}static \u0275fac=function(s){return new(s||r)(d(F),d(D),d(V))};static \u0275cmp=M({type:r,selectors:[["app-login"]],decls:26,vars:23,consts:[[1,"w-full","h-full","flex","justify-center","items-center",3,"ngStyle"],[1,"login-container"],[1,"left-panel","justify-center","items-center"],["alt","icon",1,"h-[120px]","border-white","p-2",3,"src"],[1,"left-title"],[1,"left-text"],[1,"btn-learn","custom-hover",3,"ngStyle"],[1,"right-panel","justify-center","items-center"],[1,"right-title","font-semibold"],[1,"form-group","w-full"],[1,"flex","input-control"],["id","email","name","email","type","email","autocomplete","email","placeholder","suitextech@example.com","required","",1,"bg-transparent","border-none","focus:outline-none","focus:ring-0","w-full",3,"ngModelChange","ngModel"],[1,"btn-primary","custom-hover",3,"click","disabled","ngStyle"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"forgot-link"],[3,"routerLink"],[3,"closeModalEvent","isVisible","errorMessage","title","isSuccess"],[1,"absolute","inset-0","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-6","w-6","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(s,t){s&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),m(3,"img",3),i(4,"h2",4),l(5,"\xA1Bienvenido!"),n(),i(6,"p",5),l(7),n(),i(8,"button",6),l(9,"\xA1Ayuda!"),n()(),i(10,"div",7)(11,"h3",8),l(12),n(),i(13,"div",9)(14,"label"),l(15,"Usuario"),n(),i(16,"div",10)(17,"input",11),O("ngModelChange",function(g){return w(t.user,g)||(t.user=g),g}),n()()(),i(18,"button",12),f("click",function(){return t.login()}),y(19,X,4,0,"div",13),i(20,"span"),l(21,"Continuar"),n()(),i(22,"div",14)(23,"a",15),l(24,"\xBFOlvid\xF3 su usuario?"),n()()(),i(25,"app-modal-message",16),f("closeModalEvent",function(){return t.closeModal()}),n()()()),s&2&&(a("ngStyle",p(16,q,"url("+t.urlImageBackground+")")),o(3),a("src",t.urlLogoCompany,C),o(4),k(" Bienvenido a ",t.clientData.nameCompany??"SuiteXtech",". Autent\xEDquese con su usuario para continuar. "),o(),a("ngStyle",p(18,Y,t.currentColor)),o(4),_(t.clientData.nameCompany??"SuiteXtech"),o(5),L("ngModel",t.user),o(),a("disabled",t.isLoading)("ngStyle",p(20,Y,t.currentColor)),o(),a("ngIf",t.isLoading),o(),S("opacity-0",t.isLoading),o(3),a("routerLink",E(22,W)),o(2),a("isVisible",t.isModalVisible)("errorMessage",t.errorMessage)("title",t.title)("isSuccess",t.isSuccess))},dependencies:[I,P,R,z,T,N,j,B,U,A],styles:["[_nghost-%COMP%]{display:block;width:100%;min-height:100vh;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.login-container[_ngcontent-%COMP%]{width:920px;min-height:530px;display:flex;border-radius:18px;overflow:hidden;margin:auto;background:#00000059;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:0 0 30px #0000008c}.left-panel[_ngcontent-%COMP%]{width:55%;background:#ffffff14;padding:40px 30px;display:flex;flex-direction:column;align-items:center;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px)}.icon-circle[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:25px}.left-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff;margin-bottom:15px}.left-text[_ngcontent-%COMP%]{text-align:center;color:#ececec;font-size:15px;margin-bottom:40px}.btn-learn[_ngcontent-%COMP%]{padding:10px 25px;border-radius:6px;color:#fff;border:none;cursor:pointer;transition:.2s}.right-panel[_ngcontent-%COMP%]{width:45%;padding:45px 40px;display:flex;flex-direction:column;align-items:center;background:#ffffff08;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.right-title[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:26px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}label[_ngcontent-%COMP%]{color:#fff;font-size:14px;margin-bottom:4px;display:block}.input-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:6px;border:1px solid rgba(255,255,255,.2);background:#00000040;color:#fff;font-size:15px}.btn-primary[_ngcontent-%COMP%]{width:100%;border:none;padding:10px;color:#fff;font-size:16px;border-radius:6px;cursor:pointer;margin-bottom:10px;margin-top:5px}.forgot-link[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.custom-hover[_ngcontent-%COMP%]{transition:all .25s ease-in-out}.custom-hover[_ngcontent-%COMP%]:hover{filter:brightness(1.25)}"]})};export{h as default};
