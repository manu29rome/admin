import{a as W,b as G}from"./chunk-VZWXNDCT.js";import{a as q}from"./chunk-TAZLO56O.js";import{b as z,c as B,d as K,i as U,l as Y}from"./chunk-TCNXVZO5.js";import{m as A,o as D,p as F,r as v,s as g,t as j,u as N}from"./chunk-PXC4D3VP.js";import{Cb as O,Db as P,Eb as L,Ia as S,Jb as d,Ka as a,Oa as m,Ta as E,Xa as f,aa as C,ba as _,ca as M,e as y,fb as s,gb as i,hb as r,ib as h,ic as V,lb as k,mb as u,mc as T,nb as b,rc as I,vb as w,yb as l,zb as R}from"./chunk-YY7SJIYX.js";var J=o=>({"background-image":o,"background-size":"cover","background-position":"center","background-repeat":"no-repeat",width:"100vw",height:"100vh","background-color":"#666666"}),H=o=>({"background-color":o}),Q=o=>[o];function X(o,e){if(o&1){let n=k();i(0,"re-captcha",19),u("resolved",function(p){C(n);let c=b();return _(c.onCaptchaSuccess(p))}),r()}if(o&2){let n=b();s("siteKey",n.siteKey)}}function Z(o,e){o&1&&(i(0,"div",20),M(),i(1,"svg",21),h(2,"circle",22)(3,"path",23),r()())}var x=class o{constructor(e,n,t){this.authService=e;this.router=n;this.route=t}buttonBackgroundColor=g.PRIMARY;color=g.PRIMARY;siteKey=j.SITEKEY;paramValue=null;captchaToken=null;urlImageBackground="";urlLogoCompany="";currentColor="";user="";errorMessage="";title="";domain="";email="";isModalVisible=!1;isSuccess=!0;isEmailValid=!0;isEmailTouched=!1;isLoading=!1;showCaptcha=!1;captchaResolved=!1;operation=!1;clientData={};ngOnInit(){this.showCaptcha=!0;let e=this.authService.getEmail();this.route.queryParams.subscribe(n=>{this.operation=n.operation==="true",console.log("\xBFOlvid\xF3 su usuario?",this.operation)}),e&&e.includes("@")&&(this.domain=e.split("@")[1],this.domain="/"+this.domain),this.colorDefaul()}sendEmailRecovery(){return y(this,null,function*(){if(this.isLoading=!0,!this.email){this.isLoading=!1,this.isEmailTouched=!0,this.title="Campo Vac\xEDo",this.errorMessage="No deje espacios en blanco.",this.isModalVisible=!0,this.isSuccess=!1;return}if(!this.esEmailValido(this.email)){this.isLoading=!1,this.isEmailTouched=!0,this.title="Correo Electronico",this.errorMessage="Ingrese un correo electronico valido.",this.isModalVisible=!0,this.isSuccess=!1;return}if(!this.domain){this.isLoading=!1,this.isEmailTouched=!0,this.title="Dominio vac\xEDo",this.errorMessage="No hay algun dominio seleccionado.",this.isModalVisible=!0,this.isSuccess=!1;return}this.domain=this.domain.replace(/^\//,""),this.authService.SendEmailRecovery(this.email,this.captchaToken??"",this.domain,this.operation).subscribe({next:e=>{e.success?(this.isLoading=!1,this.isEmailTouched=!0,this.title=e.data?.data?.title||"Operaci\xF3n exitosa",this.errorMessage=e.data?.data?.message||"Operaci\xF3n exitosa",this.isModalVisible=!0,this.isSuccess=!0):(this.isLoading=!1,this.isEmailTouched=!0,this.title=e.data?.data?.title||"Error",this.errorMessage=e.data?.data?.message||"Error, no fue posible enviar el correo",this.isModalVisible=!0,this.isSuccess=!1)},error:e=>{this.title=e?.error?.error?.title||"Error",this.errorMessage=e?.error?.error?.message||"Error en la solicitud al servidor",this.isModalVisible=!0,this.isSuccess=!1,this.isLoading=!1}})})}onCaptchaSuccess(e){this.captchaResolved=!!e,this.captchaToken=e??""}colorDefaul(){let e=this.authService.getClient();e?(this.clientData=JSON.parse(e),this.urlImageBackground=this.clientData?.urlImagen??v.URL_FRONT.concat("/icon/login/fondo.png"),this.urlLogoCompany=this.clientData?.urlLogo??v.URL_FRONT.concat("/icon/login/suitextech.png"),this.currentColor=this.clientData?.ColorOne??g.PRIMARY,this.domain=this.clientData?.domain??this.domain):this.router.navigate(["/login"+this.domain])}esEmailValido(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}closeModal(){this.isModalVisible=!1,this.isLoading=!1}static \u0275fac=function(n){return new(n||o)(m(N),m(D),m(A))};static \u0275cmp=E({type:o,selectors:[["app-email-recovery"]],decls:29,vars:24,consts:[[1,"w-full","h-full","flex","justify-center","items-center",3,"ngStyle"],[1,"login-container"],[1,"left-panel","justify-center","items-center"],["alt","icon",1,"h-[120px]","border-white","p-2",3,"src"],[1,"right-title","font-semibold"],[1,"left-text"],[1,"btn-learn","custom-hover",3,"ngStyle"],[1,"right-panel","justify-center","items-center"],[1,"form-group","w-full"],[1,"flex","input-control"],["id","email","name","email","type","email","autocomplete","email","placeholder","suitextech@example.com","required","",1,"bg-transparent","border-none","focus:outline-none","focus:ring-0","w-full",3,"ngModelChange","ngModel"],[1,"captcha-container","w-full","flex","justify-center"],[2,"transform","scale(0.8)","transform-origin","center"],[3,"siteKey","resolved",4,"ngIf"],[1,"btn-primary","custom-hover",3,"click","disabled","ngStyle"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"forgot-link"],[3,"routerLink"],[3,"closeModalEvent","isVisible","errorMessage","title","isSuccess"],[3,"resolved","siteKey"],[1,"absolute","inset-0","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-6","w-6","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),h(3,"img",3),i(4,"h2",4),l(5,"Recuperaci\xF3n de Correo"),r(),i(6,"p",5),l(7," Por favor, ingrese su correo alterno de recuperaci\xF3n. Aseg\xFArese de completar correctamente el captcha. "),r(),i(8,"button",6),l(9,"\xA1Ayuda!"),r()(),i(10,"div",7)(11,"h3",4),l(12),r(),i(13,"div",8)(14,"label"),l(15,"Usuario"),r(),i(16,"div",9)(17,"input",10),L("ngModelChange",function(c){return P(t.email,c)||(t.email=c),c}),r()()(),i(18,"div",11)(19,"div",12),f(20,X,1,1,"re-captcha",13),r()(),i(21,"button",14),u("click",function(){return t.sendEmailRecovery()}),f(22,Z,4,0,"div",15),i(23,"span"),l(24,"Confirmar"),r()(),i(25,"div",16)(26,"a",17),l(27,"Regresar al inicio de sesi\xF3n"),r()()(),i(28,"app-modal-message",18),u("closeModalEvent",function(){return t.closeModal()}),r()()()),n&2&&(s("ngStyle",d(16,J,"url("+t.urlImageBackground+")")),a(3),s("src",t.urlLogoCompany,S),a(5),s("ngStyle",d(18,H,t.currentColor)),a(4),R(t.clientData.nameCompany),a(5),O("ngModel",t.email),a(3),s("ngIf",t.showCaptcha),a(),s("disabled",t.isLoading)("ngStyle",d(20,H,t.currentColor)),a(),s("ngIf",t.isLoading),a(),w("opacity-0",t.isLoading),a(3),s("routerLink",d(22,Q,"/login"+t.domain)),a(2),s("isVisible",t.isModalVisible)("errorMessage",t.errorMessage)("title",t.title)("isSuccess",t.isSuccess))},dependencies:[I,V,T,Y,z,B,U,K,q,F,G,W],styles:["[_nghost-%COMP%]{display:block;width:100%;min-height:100vh;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.login-container[_ngcontent-%COMP%]{width:920px;min-height:530px;display:flex;border-radius:18px;overflow:hidden;margin:auto;background:#00000059;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:0 0 30px #0000008c}.left-panel[_ngcontent-%COMP%]{width:55%;background:#ffffff14;padding:40px 30px;display:flex;flex-direction:column;align-items:center;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px)}.icon-circle[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:25px}.left-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff;margin-bottom:15px}.left-text[_ngcontent-%COMP%]{text-align:center;color:#ececec;font-size:15px;margin-bottom:40px}.btn-learn[_ngcontent-%COMP%]{padding:10px 25px;border-radius:6px;color:#fff;border:none;cursor:pointer;transition:.2s}.right-panel[_ngcontent-%COMP%]{width:45%;padding:45px 40px;display:flex;flex-direction:column;align-items:center;background:#ffffff08;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.right-title[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:26px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}label[_ngcontent-%COMP%]{color:#fff;font-size:14px;margin-bottom:4px;display:block}.input-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:6px;border:1px solid rgba(255,255,255,.2);background:#00000040;color:#fff;font-size:15px}.btn-primary[_ngcontent-%COMP%]{width:100%;border:none;padding:10px;color:#fff;font-size:16px;border-radius:6px;cursor:pointer;margin-bottom:10px;margin-top:5px}.forgot-link[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.custom-hover[_ngcontent-%COMP%]{transition:all .25s ease-in-out}.custom-hover[_ngcontent-%COMP%]:hover{filter:brightness(1.25)}"]})};export{x as default};
