import{a as W,b as G}from"./chunk-VZWXNDCT.js";import{a as K}from"./chunk-TAZLO56O.js";import{b as U,c as B,d as z,i as j,j as Y,l as q}from"./chunk-TCNXVZO5.js";import{o as V,p as A,r as g,s as u,t as D,u as N}from"./chunk-PXC4D3VP.js";import{Cb as S,Db as L,Eb as T,Ia as b,Ib as P,Jb as _,Ka as n,Oa as w,Ta as E,Xa as f,aa as C,ba as x,ca as v,fb as s,gb as i,hb as r,ib as m,ic as R,lb as y,mb as h,mc as I,nb as d,rc as F,vb as k,yb as l,zb as M}from"./chunk-YY7SJIYX.js";var J=o=>({"background-image":o,"background-size":"cover","background-position":"center","background-repeat":"no-repeat",width:"100vw",height:"100vh","background-color":"#666666"}),H=o=>({"background-color":o}),X=()=>["/email-recovery"],Q=()=>({operation:!0});function Z(o,e){if(o&1&&m(0,"img",25),o&2){let a=d();s("src",a.urlIconNoVisible,b)}}function $(o,e){if(o&1&&m(0,"img",26),o&2){let a=d();s("src",a.urlIconVisible,b)}}function ee(o,e){if(o&1){let a=y();i(0,"div",9)(1,"label"),l(2,"C\xF3digo"),r(),i(3,"input",27),T("ngModelChange",function(c){C(a);let p=d();return L(p.code,c)||(p.code=c),x(c)}),r()()}if(o&2){let a=d();n(3),S("ngModel",a.code)}}function te(o,e){if(o&1){let a=y();i(0,"re-captcha",28),h("resolved",function(c){C(a);let p=d();return x(p.onCaptchaSuccess(c))}),r()}if(o&2){let a=d();s("siteKey",a.siteKey)}}function ie(o,e){o&1&&(i(0,"div",29),v(),i(1,"svg",30),m(2,"circle",31)(3,"path",32),r()())}function oe(o,e){o&1&&(i(0,"div",29),l(1," --> "),v(),i(2,"svg",30),m(3,"circle",31)(4,"path",32),r()())}var O=class o{constructor(e,a){this.authService=e;this.router=a}urlImageBackground=g.URL_FRONT.concat("/icon/login/fondo.png");urlLogoCompany=g.URL_FRONT.concat("/icon/login/suitextech.png");urlIconVisible=g.URL_FRONT.concat("/icon/login/visible-eye.png");urlIconNoVisible=g.URL_FRONT.concat("/icon/login/no-visible-eye.png");linkColor=u.PRIMARY;linkHoverColor=u.SECONDARY;currentLinkColorForgotPassword=this.linkColor;currentLinkColorGoBack=this.linkColor;iconColor=u.PRIMARY;buttonBackgroundColor=u.PRIMARY;buttonHoverColor=u.SECONDARY;currentColor=this.buttonBackgroundColor;siteKey=D.SITEKEY;clientData={};apps=[];isModalVisible=!1;isSuccess=!0;captchaResolved=!1;isLoading=!1;isLoadingBack=!1;showPassword=!1;showCaptcha=!1;captchaToken=null;selectedAppUrl="";errorMessage="";title="";user;password="";token="";code="";domain="";ngOnInit(){this.showCaptcha=!0;let e=this.authService.getEmail();e&&e.includes("@")&&(this.domain=e.split("@")[1],this.domain="/"+this.domain),this.colorDefaul()}onCaptchaSuccess(e){this.captchaResolved=!!e,this.captchaToken=e??""}colorDefaul(){let e=this.authService.getClient();e?(this.clientData=JSON.parse(e),this.clientData&&(this.apps=JSON.parse(this.clientData.Apps),this.apps.length>0&&(this.selectedAppUrl=this.apps[0].url)),this.urlImageBackground=this.clientData?.urlImagen??g.URL_FRONT.concat("/icon/login/fondo.png"),this.urlLogoCompany=this.clientData?.urlLogo??g.URL_FRONT.concat("/icon/login/suitextech.png"),this.currentColor=this.clientData?.ColorOne??u.PRIMARY):this.router.navigate(["/login/"+this.domain])}resolved(e){console.log("Captcha resuelto:",e),this.captchaToken=e}onCheckboxSelected(e){this.selectedAppUrl=e,console.log("Selected from checkbox:",this.selectedAppUrl)}login(){if(this.isLoading=!0,!this.password){this.isLoading=!1,this.title="Datos incompletos",this.errorMessage="Escriba su contrase\xF1a.",this.isModalVisible=!0,this.isSuccess=!1;return}if(!this.captchaResolved&&this.captchaToken==null){this.isLoading=!1,this.errorMessage="Por favor, completa el captcha",this.isModalVisible=!0,this.isSuccess=!1,this.title="Error Captcha",this.resetCaptcha();return}this.user=this.authService.getEmail(),this.authService.loginTwo(this.user,this.password,this.captchaToken??"",this.code).subscribe({next:e=>{e.success?(this.isLoading=!1,this.authService.setApp(),this.router.navigate(["/dashboard"])):(this.errorMessage=e?.error?.message||"Error desconocido",this.title=e?.error?.title||"Error",this.isModalVisible=!0,this.isSuccess=!0,this.isLoading=!1,this.resetCaptcha())},error:e=>{this.errorMessage=e.error?.error?.message||"Error en la solicitud al servidor",this.isModalVisible=!0,this.isSuccess=!1,this.title=e?.error?.error?.title||"Error",this.isLoading=!1,this.resetCaptcha()}})}closeModal(){this.isModalVisible=!1}goback(){this.isLoadingBack=!0,this.authService.loginStar(),this.router.navigate(["/login"+this.domain])}resetCaptcha(){typeof grecaptcha<"u"&&grecaptcha.reset()}togglePasswordVisibility(){this.showPassword=!this.showPassword}static \u0275fac=function(a){return new(a||o)(w(N),w(V))};static \u0275cmp=E({type:o,selectors:[["app-login-two"]],decls:37,vars:33,consts:[[1,"w-full","h-full","flex","justify-center","items-center",3,"ngStyle"],[1,"login-container"],[1,"left-panel","justify-center","items-center"],["alt","icon",1,"h-[120px]","border-white","p-2",3,"src"],[1,"left-title"],[1,"left-text"],[1,"btn-learn","custom-hover",3,"ngStyle"],[1,"right-panel","justify-center","items-center"],[1,"right-title","font-semibold"],[1,"form-group","w-full"],[1,"flex","input-control"],["id","password","name","password","autocomplete","off","required","","placeholder","Contrase\xF1a",1,"bg-transparent","border-none","focus:outline-none","focus:ring-0","w-full",3,"ngModelChange","ngModel","type"],["type","button",1,"",3,"click"],["alt","Mostrar contrase\xF1a","class","h-[20px] r-2 w-auto opacity-100",3,"src",4,"ngIf"],["alt","Ocultar contrase\xF1a","class","h-[20px] w-auto opacity-60",3,"src",4,"ngIf"],["class","form-group w-full",4,"ngIf"],[1,"captcha-container","w-full","flex","justify-center"],[2,"transform","scale(0.8)","transform-origin","center"],[3,"siteKey","resolved",4,"ngIf"],[1,"btn-primary","custom-hover",3,"click","disabled","ngStyle"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],[1,"btn-secondary",3,"click"],[1,"forgot-link"],[3,"routerLink","queryParams"],[3,"closeModalEvent","isVisible","errorMessage","title","isSuccess"],["alt","Mostrar contrase\xF1a",1,"h-[20px]","r-2","w-auto","opacity-100",3,"src"],["alt","Ocultar contrase\xF1a",1,"h-[20px]","w-auto","opacity-60",3,"src"],["maxlength","6","id","code","name","code","placeholder","C\xF3digo","autocomplete","off",1,"text-center","input-control","border-none","focus:outline-none","focus:ring-0",2,"text-transform","uppercase",3,"ngModelChange","ngModel"],[3,"resolved","siteKey"],[1,"absolute","inset-0","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-6","w-6","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),m(3,"img",3),i(4,"h2",4),l(5),r(),i(6,"p",5),l(7," Autent\xEDquese con su contrase\xF1a para continuar. Aseg\xFArese de completar correctamente el captcha. "),r(),i(8,"button",6),l(9,"\xA1Ayuda!"),r()(),i(10,"div",7)(11,"h3",8),l(12),r(),i(13,"div",9)(14,"label"),l(15,"Contrase\xF1a"),r(),i(16,"div",10)(17,"input",11),T("ngModelChange",function(p){return L(t.password,p)||(t.password=p),p}),r(),i(18,"button",12),h("click",function(){return t.togglePasswordVisibility()}),f(19,Z,1,1,"img",13)(20,$,1,1,"img",14),r()()(),f(21,ee,4,1,"div",15),i(22,"div",16)(23,"div",17),f(24,te,1,1,"re-captcha",18),r()(),i(25,"button",19),h("click",function(){return t.login()}),f(26,ie,4,0,"div",20),i(27,"span"),l(28,"Entrar"),r()(),i(29,"button",21),h("click",function(){return t.goback()}),f(30,oe,5,0,"div",20),i(31,"span"),l(32,"Regresar"),r()(),i(33,"div",22)(34,"a",23),l(35,"\xBFOlvid\xF3 su contrase\xF1a?"),r()()(),i(36,"app-modal-message",24),h("closeModalEvent",function(){return t.closeModal()}),r()()()),a&2&&(s("ngStyle",_(25,J,"url("+t.urlImageBackground+")")),n(3),s("src",t.urlLogoCompany,b),n(2),M(t.clientData.nameCompany??"SuiteXtech"),n(3),s("ngStyle",_(27,H,t.currentColor)),n(4),M(t.clientData.NameUser),n(5),S("ngModel",t.password),s("type",t.showPassword?"text":"password"),n(2),s("ngIf",!t.showPassword),n(),s("ngIf",t.showPassword),n(),s("ngIf",t.clientData.requestCode),n(3),s("ngIf",t.showCaptcha),n(),s("disabled",t.isLoading)("ngStyle",_(29,H,t.currentColor)),n(),s("ngIf",t.isLoading),n(),k("opacity-0",t.isLoading),n(3),s("ngIf",t.isLoadingBack),n(),k("opacity-0",t.isLoadingBack),n(3),s("routerLink",P(31,X))("queryParams",P(32,Q)),n(2),s("isVisible",t.isModalVisible)("errorMessage",t.errorMessage)("title",t.title)("isSuccess",t.isSuccess))},dependencies:[F,R,I,q,U,B,j,Y,z,K,G,W,A],styles:["[_nghost-%COMP%]{display:block;width:100%;min-height:100vh;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.login-container[_ngcontent-%COMP%]{width:920px;min-height:530px;display:flex;border-radius:18px;overflow:hidden;margin:auto;background:#00000059;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:0 0 30px #0000008c}.left-panel[_ngcontent-%COMP%]{width:55%;background:#ffffff14;padding:40px 30px;display:flex;flex-direction:column;align-items:center;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px)}.icon-circle[_ngcontent-%COMP%]{width:70px;height:70px;background:#ff6db4;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:25px}.left-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff;margin-bottom:15px}.left-text[_ngcontent-%COMP%]{text-align:center;color:#ececec;font-size:15px;margin-bottom:40px}.btn-learn[_ngcontent-%COMP%]{padding:10px 25px;border-radius:6px;color:#fff;border:none;cursor:pointer;transition:.2s}.btn-learn[_ngcontent-%COMP%]:hover{background:#ff5aa4}.right-panel[_ngcontent-%COMP%]{width:45%;padding:45px 40px;display:flex;flex-direction:column;align-items:center;background:#ffffff08;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.right-title[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:26px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}label[_ngcontent-%COMP%]{color:#fff;font-size:14px;margin-bottom:4px;display:block}.input-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:6px;border:1px solid rgba(255,255,255,.2);background:#00000040;color:#fff;font-size:15px}.captcha-box[_ngcontent-%COMP%]{margin:15px 0 18px;background:#fff;padding:8px;border-radius:8px;display:flex;justify-content:center}.btn-primary[_ngcontent-%COMP%]{width:100%;background:#ff6db4;border:none;padding:10px;color:#fff;font-size:16px;border-radius:6px;cursor:pointer;margin-bottom:10px;margin-top:5px}.btn-primary[_ngcontent-%COMP%]:hover{background:#ff5aa4}.btn-secondary[_ngcontent-%COMP%]{width:100%;background:#fff6;border:none;padding:10px;color:#fff;font-size:16px;border-radius:6px;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffff61}.forgot-link[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.forgot-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.custom-hover[_ngcontent-%COMP%]{transition:all .25s ease-in-out}.custom-hover[_ngcontent-%COMP%]:hover{filter:brightness(1.25)}"]})};export{O as default};
