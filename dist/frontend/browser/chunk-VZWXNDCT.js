import{Oa as d,S as m,T as p,Ta as x,Ua as g,V as c,W as a,Za as u,_a as j,eb as C,l as b,o as v,pa as E,ta as w,vc as A,z as y}from"./chunk-YY7SJIYX.js";var S=new c("recaptcha-language"),O=new c("recaptcha-base-url"),D=new c("recaptcha-nonce-tag"),B=new c("recaptcha-settings"),M=new c("recaptcha-v3-site-key"),k=new c("recaptcha-loader-options");function L(n,e,l,{url:t,lang:i,nonce:r}={}){window.ng2recaptchaloaded=()=>{l(grecaptcha)};let s=document.createElement("script");s.innerHTML="";let{url:o,nonce:f}=e(new URL(t||"https://www.google.com/recaptcha/api.js"));o.searchParams.set("render",n==="explicit"?n:n.key),o.searchParams.set("onload","ng2recaptchaloaded"),o.searchParams.set("trustedtypes","true"),i&&o.searchParams.set("hl",i),s.src=o.href;let h=f||r;h&&s.setAttribute("nonce",h),s.async=!0,s.defer=!0,document.head.appendChild(s)}function T({v3SiteKey:n,onBeforeLoad:e,onLoaded:l}){let t=n?{key:n}:"explicit";I.loadScript(t,e,l)}var I={loadScript:L,newLoadScript:T};function N(n){return n.asObservable().pipe(y(e=>e!==null))}var R=(()=>{let e=class e{constructor(t,i,r,s,o,f){this.platformId=t,this.language=i,this.baseUrl=r,this.nonce=s,this.v3SiteKey=o,this.options=f;let h=this.init();this.ready=h?N(h):v()}init(){if(e.ready)return e.ready;if(!A(this.platformId))return;let t=new b(null);return e.ready=t,I.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:i=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(i);let r=new URL(this.baseUrl??i);return this.language&&r.searchParams.set("hl",this.language),{url:r,nonce:this.nonce}},onLoaded:i=>{let r=i;this.options?.onLoaded&&(r=this.options.onLoaded(i)),t.next(r)}}),t}};e.ready=null,e.\u0275fac=function(i){return new(i||e)(a(w),a(S,8),a(O,8),a(D,8),a(M,8),a(k,8))},e.\u0275prov=m({token:e,factory:e.\u0275fac});let n=e;return n})(),z=0,re=(()=>{let e=class e{constructor(t,i,r,s){this.elementRef=t,this.loader=i,this.zone=r,this.id=`ngrecaptcha-${z++}`,this.errorMode="default",this.resolved=new u,this.error=new u,this.errored=new u,s&&(this.siteKey=s.siteKey,this.theme=s.theme,this.type=s.type,this.size=s.size,this.badge=s.badge)}ngAfterViewInit(){this.subscription=this.loader.ready.subscribe(t=>{t!=null&&t.render instanceof Function&&(this.grecaptcha=t,this.renderRecaptcha())})}ngOnDestroy(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()}execute(){this.size==="invisible"&&(this.widget!=null?this.grecaptcha.execute(this.widget):this.executeRequested=!0)}reset(){this.widget!=null&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())}get __unsafe_widgetValue(){return this.widget!=null?this.grecaptcha.getResponse(this.widget):null}expired(){this.resolved.emit(null)}onError(t){this.error.emit(t),this.errored.emit(t)}captchaResponseCallback(t){this.resolved.emit(t)}grecaptchaReset(){this.widget!=null&&this.zone.runOutsideAngular(()=>this.grecaptcha.reset(this.widget))}renderRecaptcha(){let t={badge:this.badge,callback:i=>{this.zone.run(()=>this.captchaResponseCallback(i))},"expired-callback":()=>{this.zone.run(()=>this.expired())},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};this.errorMode==="handled"&&(t["error-callback"]=(...i)=>{this.zone.run(()=>this.onError(i))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,t),this.executeRequested===!0&&(this.executeRequested=!1,this.execute())}};e.\u0275fac=function(i){return new(i||e)(d(E),d(R),d(j),d(B,8))},e.\u0275cmp=x({type:e,selectors:[["re-captcha"]],hostVars:1,hostBindings:function(i,r){i&2&&C("id",r.id)},inputs:{id:"id",siteKey:"siteKey",theme:"theme",type:"type",size:"size",tabIndex:"tabIndex",badge:"badge",errorMode:"errorMode"},outputs:{resolved:"resolved",error:"error",errored:"errored"},exportAs:["reCaptcha"],standalone:!1,decls:0,vars:0,template:function(i,r){},encapsulation:2});let n=e;return n})(),P=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=g({type:e}),e.\u0275inj=p({});let n=e;return n})(),oe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=g({type:e}),e.\u0275inj=p({providers:[R],imports:[P]});let n=e;return n})();export{re as a,oe as b};
