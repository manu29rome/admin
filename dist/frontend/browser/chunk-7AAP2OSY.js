import{b as s,d as v,r as n,u as g}from"./chunk-PXC4D3VP.js";import{A as l,J as T,L as m,P as a,S as C,W as u,o as d,p}from"./chunk-YY7SJIYX.js";var f=class h{constructor(r,o){this.httpClient=r;this.authService=o}CHATLIST_URL=n.MOD05.concat("/Chat/listChatUsers");CHAT_URL=n.MOD05.concat("/Chat/messages");CHATIMAGE_URL=n.MOD01.concat("/Client/uploadimage");CHATFILE_URL=n.MOD01.concat("/Client/uploadfile");CHATGROUPVIEW_URL=n.MOD05.concat("/Chat/viewgroup");CHATNAMELIST=n.MOD05.concat("/Chat/chatUsersGroup");ip="";token="";groupView(r){let o=`${this.CHATGROUPVIEW_URL}?idGroup=${encodeURIComponent(r)}`;this.token=this.authService.getToken()??"";let i=new s().set("Token",this.token).set("App","admin");return this.httpClient.get(o,{headers:i}).pipe(a(t=>{console.log("Response received:",t),t&&t.success||(t&&t.error?console.error("correcto"):console.error("No se recibi\xF3 una respuesta v\xE1lida."))}),l(t=>(console.error("Error en la solicitud HTTP:",t),p(t))))}chatList(){let r=new Date().getTime(),o=`${this.CHATLIST_URL}?_=${r}`,i=new s({Token:this.authService.getToken()??"","Cache-Control":"no-cache",App:"admin",Pragma:"no-cache"});return this.httpClient.get(o,{headers:i}).pipe(T(2),m(1),l(t=>(console.error("Error en la solicitud HTTP:",t),d([]))))}chat(r,o){let i={idChatRoom:r,isGroup:o};this.token=this.authService.getToken()??"";let t=new s().set("Token",this.token).set("App","admin");return this.httpClient.post(this.CHAT_URL,i,{headers:t}).pipe(a(e=>{console.log("Response received:",e),e&&e.success||(e&&e.error?console.error("correcto"):console.error("No se recibi\xF3 una respuesta v\xE1lida."))}),l(e=>(console.error("Error en la solicitud HTTP:",e),p(e))))}imageBase(r,o,i){this.token=this.authService.getToken()??"";let t={file:r,folder:o,module:i},e=new s().set("Token",this.token).set("Content-Type","application/json").set("App","admin");return this.httpClient.post(this.CHATIMAGE_URL,t,{headers:e}).pipe(a(c=>{c.success==!0&&console.log(c)}))}fileBase(r,o,i){this.token=this.authService.getToken()??"";let t={file:r,folder:o,module:i},e=new s().set("Token",this.token).set("Content-Type","application/json").set("App","admin");return this.httpClient.post(this.CHATFILE_URL,t,{headers:e}).pipe(a(c=>{c.success==!0&&console.log(c)}))}playNotificationSound(){new Audio(n.URL_SOUND_NOTIFICATION).play().catch(o=>console.error("Error al reproducir el sonido:",o))}GroupNameList(r,o){let i={idChatRoom:r,isGroup:o};this.token=this.authService.getToken()??"";let t=new s().set("Token",this.token).set("App","admin");return this.httpClient.post(this.CHATNAMELIST,i,{headers:t}).pipe(a(e=>{console.log("Response received:",e),e&&e.success||(e&&e.error?console.error("correcto"):console.error("No se recibi\xF3 una respuesta v\xE1lida."))}),l(e=>(console.error("Error en la solicitud HTTP:",e),p(e))))}static \u0275fac=function(o){return new(o||h)(u(v),u(g))};static \u0275prov=C({token:h,factory:h.\u0275fac,providedIn:"root"})};export{f as a};
